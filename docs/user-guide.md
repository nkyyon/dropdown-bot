# ユーザーガイド

## 概要

DropDown Botは、Discord上でキャラクター選択をDropDownMenuで行えるBotです。ゲーム大会などで選手が使用キャラクターを運営に報告する際の手入力ミスを防ぎます。

## 対象ユーザー

### 一般ユーザー（選手）
- キャラクター選択機能の利用
- DropDownMenuからの選択

### 管理者（運営）
- キャラクターの追加・削除
- JSON直接編集による一括管理

## 機能説明

### キャラクター選択機能

#### 使用方法
1. Discord上で `/character select` と入力
2. 送信ボタンを押す
3. 表示されるDropDownMenuからキャラクターを選択
4. 選択結果がチャットに自動出力される

#### 実行例
```
ユーザー: /character select
Bot: 【キャラクター選択】以下から選択してください
     [DropDownMenu表示]
     ├ 春麗
     ├ リュウ  
     ├ ケン
     └ ザンギエフ

ユーザー: [春麗を選択]
Bot: @ユーザー名 が **春麗** を選択しました
```

### キャラクター管理機能（管理者のみ）

#### キャラクター追加
```
管理者: /character add 春麗
Bot: キャラクター「春麗」を追加しました
```

#### キャラクター削除
```
管理者: /character remove 春麗
Bot: キャラクター「春麗」を削除しました
```

#### 現在のキャラクターリスト確認
```
管理者: /character list
Bot: 【現在のキャラクターリスト】
     1. 春麗
     2. リュウ
     3. ケン
     4. ザンギエフ
```

## 管理者向け機能

### JSON直接編集

より効率的な一括管理のため、JSONファイルを直接編集できます。

#### ファイル場所
```
src/data/characters.json
```

#### ファイル形式
```json
{
  "characters": [
    "春麗",
    "リュウ",
    "ケン",
    "ザンギエフ",
    "さくら",
    "いぶき"
  ],
  "metadata": {
    "lastUpdated": "2025-07-19T12:00:00Z",
    "version": "1.0",
    "maxCharacters": 25
  }
}
```

#### 編集手順
1. `characters.json` ファイルを編集
2. GitHubにプッシュ
3. Koyebが自動でデプロイ実行
4. Bot再起動により新しいリストが反映

#### 注意事項
- JSON形式を正しく保つ
- 重複キャラクターは避ける
- 最大25キャラクターまで推奨
- 特殊文字の使用に注意

### 権限管理

#### 管理者権限の設定
Discordサーバーで以下のいずれかの権限を持つユーザーが管理者として認識されます：

- **管理者権限（Administrator）**
- **チャンネル管理権限（Manage Channels）**
- **サーバー管理権限（Manage Guild）**

#### 権限確認方法
```
管理者: /character add テストキャラ
Bot: [成功] キャラクター「テストキャラ」を追加しました

一般ユーザー: /character add テストキャラ
Bot: [エラー] このコマンドの実行には管理者権限が必要です
```

## トラブルシューティング

### よくある問題と解決方法

#### 1. コマンドが表示されない
**原因**: Botが正しく招待されていない、または権限不足
**解決策**: 
- Bot招待リンクを使用して再招待
- 必要な権限（Send Messages, Use Slash Commands）を確認

#### 2. DropDownMenuが表示されない
**原因**: キャラクターリストが空、またはJSON形式エラー
**解決策**:
- `/character list` で現在のリストを確認
- JSON形式の確認・修正

#### 3. 選択したキャラクターが表示されない
**原因**: Bot権限不足
**解決策**:
- Botにメッセージ送信権限を付与
- チャンネル権限の確認

#### 4. 管理者コマンドが実行できない
**原因**: 権限不足
**解決策**:
- Discordサーバーでの管理者権限確認
- ロール設定の見直し

### エラーメッセージ一覧

| エラーメッセージ | 原因 | 解決方法 |
|------------------|------|----------|
| `このコマンドの実行には管理者権限が必要です` | 権限不足 | 管理者権限の確認 |
| `キャラクターリストが空です` | JSONファイルが空 | キャラクター追加 |
| `既に存在するキャラクターです` | 重複追加 | 別の名前で追加 |
| `指定されたキャラクターが見つかりません` | 存在しないキャラクター削除 | リスト確認後再実行 |
| `キャラクター数が上限に達しています` | 25文字制限超過 | 不要なキャラクター削除 |

## サポート

### 問い合わせ方法
1. **GitHub Issues**: バグレポート・機能要望
2. **Discord管理者**: 運用に関する質問
3. **開発者連絡**: 技術的な問題

### ログ確認
管理者は以下の方法でBotの動作ログを確認できます：
1. Koyebダッシュボードにアクセス
2. ログセクションで実行状況を確認
3. エラーやパフォーマンス状況を監視

### バックアップ
重要なキャラクターデータは定期的にバックアップを取ることを推奨します：
```bash
# 手動バックアップ
cp src/data/characters.json backup/
```

### バージョン情報
現在のBot情報は `/character info` コマンドで確認できます：
```
管理者: /character info
Bot: 【Bot情報】
     バージョン: v1.0.0
     キャラクター数: 6
     最終更新: 2025-07-19 12:00:00
     稼働時間: 2日 3時間 15分
```